---
import type { CollectionEntry } from "astro:content";

const { entry, allEntries } = Astro.props as {
  entry: CollectionEntry<"blog">;
  allEntries: CollectionEntry<"blog">[];
};

const sorted = [...allEntries].sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf());
const idx = sorted.findIndex((e) => e.slug === entry.slug);
const prev = idx < sorted.length - 1 ? sorted[idx + 1] : null;
const next = idx > 0 ? sorted[idx - 1] : null;
---

<nav class="blog-nav container" aria-label="Post navigation">
  <div class="blog-nav__inner">
    {prev && <a class="blog-nav__prev" href={`/${prev.slug}/`}>← {prev.data.title}</a>}
    {next && <a class="blog-nav__next" href={`/${next.slug}/`}>{next.data.title} →</a>}
  </div>
</nav>
