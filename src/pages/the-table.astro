---
import BaseLayout from "@/layouts/BaseLayout.astro";
import { getCollection } from "astro:content";

const posts = (await getCollection("blog"))
  .sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf());
---

<BaseLayout title="The Table | Jen Shawgo Nutrition">
  <main class="main__content">
    <section class="col-md-12">
      <div class="container blog__wrap">
        <h1>The Table</h1>
        <div class="row">
          {posts.map((post) => (
            <div class="col-md-6">
              <article class="blog-card">
                {post.data.heroImage && <a href={`/${post.slug}/`}><img src={post.data.heroImage} alt={post.data.title} loading="lazy" /></a>}
                <h2><a href={`/${post.slug}/`}>{post.data.title}</a></h2>
                {post.data.description && <p>{post.data.description}</p>}
              </article>
            </div>
          ))}
        </div>
      </div>
    </section>
  </main>
</BaseLayout>
